/* Start game on load */
window.addEventListener('load', function() {
  $.init();
  // Input
  $.in = new Input();
  // Collisions system
  $.o = new Collisions();
  // Bind keyboard
  $.in.b([13, 65, 68, 87, 83]);

  // Collision groups
  $.g.w = new Group(); // Walls
  $.g.z = new Group(); // Zombies
  $.g.s = new Group(); // Spawners
  $.g.i = new Group(); // Items
  $.g.h = new Group(); // Start and end points
  $.g.b = new Group(); // Bullets
  $.g.x = new Group(); // Pushables boxes
  $.g.n = new Group(); // NPCs

  $.lvl = new Level();
  $.txt = new Text();

  // Sound manager
  $.sn = new Sound();
  //$.sn.a('gu', [1,0.48,,0.196,,0.281,0.3,0.4646,0.0441,-0.5027,,,,,,,,,,,0.4261,0.0232,,0.1362,-0.1015,1,,,0.2264,,,,0.5], 4);
  // 0.5,,0.2497,,0.0078,0.3,0.1379,0.075,-0.5493,,,,,,,,,,,0.3833,0.1918,,,,1,,,0.0668,,,,1
  //$.sn.a('gu', [,,0.1953, 0.1554, 0.0181, 0.3686, 0.0664, -0.3694,,,,,,0.4446, -0.5364,,0.1906, -0.0251, 1,,, 0.2643,, 0.5], 10);
  //$.sn.a('gu', [0,,0.1898,0.123,0.1973,0.3901,0.0381,-0.6025,,,,,,0.6192,-0.5134,,,,1,,,,,0.5], 10);
  $.sn.a('gu', [1,,0.1799,0.138,0.3683,0.6868,0.0362,-0.5561,,,,,,0.0728,0.1995,,,,1,,,0.1175,,0.4], 10);
  // Shotgun
  $.sn.a('sh', [,0.001,0.228,0.039,0.228,0.418,,-0.465,,,,,,0.195,0.0166,,,,1,,,0.1804,,0.4], 10);
  // Flame
  $.sn.a('fl', [3,,0.3554,0.2783,0.3645,0.0744,,,,,,,,,,,,,1,,,,,0.36], 8);
  // Player hurt
  $.sn.a('ph', [,,0.0209,,0.1543,0.344,,-0.3079,,,,,,0.1952,,,,,1,,,,,0.5], 1);
  // Vaccine drop
  $.sn.a('vd', [,,0.1832,,0.3385,0.3446,,0.2004,,,,,,0.082,,0.439,,,1,,,,,0.3], 1);
  // Vaccine pick up
  $.sn.a('vp', [1,,0.123,,0.2337,0.35,,0.443,-0.139,,,,,1,,0.662,,,1,,,,,0.4], 1);
  // Zombie hurt
  $.sn.a('zh', [,,0.0279,,0.178,0.2231,,-0.3218,,,,,,0.3812,,,,,1,,,,,0.7], 20);
  // Zombie growl
  $.sn.a('zg', [,,0.274,0.011,0.386,0.147,,0.162,-0.257,,,0.066,-0.6916,0.7262,-0.2,-0.8884,0.016,0.016,1,1,,,0.016,0.4], 10);
  //*$.sn.a('zg', [,-0.114,0.3088,0.0099,0.4162,0.0885,,0.2441,-0.3283,-0.1949,0.069,-0.039,-0.6369,0.5978,-0.2415,-0.9006,-0.0128,0.0657,1.0131,1.2188,0.0458,-0.0328,-0.1911,0.4], 10);
  //*$.sn.a('zg', [,0.263,,0.3421,0.392,0.083,,-0.159,0.097,,,-0.003,0.059,,-0.995,0.533,-0.014,-0.357,0.97,-0.1439,-0.5768,0,0.5232,0.4], 10);
  $.sn.a('sl', [,,0.2695,,0.3831,0.215,,0.3887,,,,,,0.1218,,0.5948,,,1,,,,,0.6], 1);
  // Zombie dead
  $.sn.a('zd', [3,,0.199,0.2506,0.436,0.0582,,0.285,,0.5539,0.3764,-0.7496,0.7366,,,,,,1,,,,,0.7], 5);
  //3,,0.1191,0.2934,0.4947,0.5033,,,,,,0.3099,0.8442,,,,-0.088,-0.245,1,,,,,0.5
  // Explosion
  $.sn.a('ex', [3,,0.3825,0.4313,0.3835,0.7215,,-0.3735,,,,,,,,,0.0109,-0.0889,1,,,,,0.5], 2);
  // Game over fanfare
  $.sn.a('go', [,-0.1461,1.3033,0.3813,0.287,0.5,,0,-0.5148,0.6261,-0.6554,-0.2147,0.561,0.1771,0.2262,0.5984,0.017,0.0277,0.5419,0.1823,0.0913,0.0041,-0.0049,0.7], 1);
  // ,0.003,0.762,,0.564,0.4883,,-0.329,-0.231,0.685,0.542,,,0.4869,,0.3,1,-0.574,1,,,,,
  // Win fanfare
  $.sn.a('wn', [,0.003,0.762,,0.555,0.393,,0.186,-0.117,0.685,0.518,,,0.4869,,0.3,1,-0.574,1,,,,,0.7], 1);
  // Music
  // ,0.0191,0.6088,0.5007,-0.1587,0.15,,0.2586,0.0136,0.4341,-0.7983,-0.1573,0.157,0.501,-0.622,1,-1,-1,0.759,-0.654,1,0.0971,0.1186,
  //
  // Game Scenes
  $.scn = {};
  $.scn.menu = new MenuScene();
  $.scn.menu.loop();
});
